<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="BIOS%20Documentation-Dateien/filelist.xml">
<title>BIOS Documentation</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="time"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:LastAuthor>ruckert</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:Created>2010-03-09T12:37:00Z</o:Created>
  <o:LastSaved>2010-03-09T12:37:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1696</o:Words>
  <o:Characters>10686</o:Characters>
  <o:Company>HM</o:Company>
  <o:Lines>89</o:Lines>
  <o:Paragraphs>24</o:Paragraphs>
  <o:CharactersWithSpaces>12358</o:CharactersWithSpaces>
  <o:Version>10.4219</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;}
h1
	{mso-style-next:Standard;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;}
h2
	{mso-style-next:Standard;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;
	font-style:italic;}
h3
	{mso-style-next:Standard;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;
	mso-fareast-language:EN-US;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 65.95pt 72.0pt 65.95pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Normale Tabelle";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
table.MsoTableGrid
	{mso-style-name:Tabellengitternetz;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=DE style='tab-interval:36.0pt'>

<div class=Section1>

<h1><span style='mso-ansi-language:DE'>BIOS <span class=SpellE>Documentation</span><o:p></o:p></span></h1>

<p class=MsoNormal><span style='mso-ansi-language:DE'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-GB style='mso-ansi-language:EN-GB'>General Properties and
Memory Setup<o:p></o:p></span></h2>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Boot sequence<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The bios
starts with a boot sequence located at 0c8000 0000 <span class=SpellE>0000</span>
<span class=SpellE>0000</span>. It set s up the Trap handler registers <span
class=SpellE>rTT</span> (dynamic traps) and <span class=SpellE><span
class=GramE>rT</span></span> (forced traps). It <span class=GramE>calls<span
style='mso-spacerun:yes'>  </span>a</span> subroutine (memory) to initialize <span
class=SpellE>rV</span> and the page tables.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>If the CPU
simulator or a debugger has loaded a user <span class=SpellE>programm</span>,
it should <span class=GramE>set<span style='mso-spacerun:yes'>  </span><span
class=SpellE>rXX</span></span> to #FB0000FF = UNSAVE $255. This user program is
then started with a RESUME 1 operation after preparing $255 to contain the
initial value (-1) for <span class=SpellE>rK</span>. The RESUME 1 operation
will copy <span class=SpellE>rBB</span> to $255, this should be the place in
the stack where UNSAVE will find its data.<span style='mso-tab-count:1'>            </span><span
class=SpellE><span class=GramE>rWW</span></span> should be the entry point in
the main program, <span style='mso-tab-count:1'>     </span>that’s where the
program continues after the UNSAVE.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>If no
program is loaded, <span class=SpellE>rXX</span> will be 0, that is TRAP 0<span
class=GramE>,Halt,0</span> and it ends the program, before it has started, in
the Halt trap handler.<o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Hardware<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>This Bios
handles assumes the following devices to be attached.<o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<div align=center>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-bottom:double windowtext 1.5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>Device<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>Start <span class=SpellE>Adress</span><o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>Interrupt<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:double windowtext 1.5pt;mso-border-alt:
  solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>ROM<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:double windowtext 1.5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8000 0000 <span class=SpellE>0000</span> <span
  class=SpellE>0000</span><o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:double windowtext 1.5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>RAM<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8000 0001 0000 <span class=SpellE>0000</span><o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Keyboard<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8001 0000 <span class=SpellE>0000</span> <span
  class=SpellE>0000</span><o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>17<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Mouse<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8001 0000 <span class=SpellE>0000</span>
  0010<o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>19<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>GPU<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8001 0000 <span class=SpellE>0000</span>
  0020<o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>20<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Timer<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8001 0000 <span class=SpellE>0000</span>
  0060<o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>21<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7;mso-yfti-lastrow:yes'>
  <td width=173 valign=top style='width:129.55pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Video Ram
  640x480<o:p></o:p></span></p>
  </td>
  <td width=192 valign=top style='width:144.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'>0x8002 0000 <span class=SpellE>0000</span> <span
  class=SpellE>0000</span><o:p></o:p></span></p>
  </td>
  <td width=141 valign=top style='width:105.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
  style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

</div>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Page Tables<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The page
tables are kept in ROM, so there is no way of altering the tables at run time.
Consequently, page faults can not be serviced properly.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The memory
is organized in pages of 8 <span class=SpellE>kByte</span>. <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The first
page in RAM is not mapped into user <span class=GramE>space,</span> it is
reserved for the bios. <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The user
TEXT <span class=SpellE><span class=GramE>segement</span></span><span
class=GramE><span style='mso-spacerun:yes'>  </span>has</span> 12 pages (96kB)
mapping virtual addresses from 0x0 to 0x17FFF to physical addresses from #0000
0001 0000 2000 to #0000 0001 <span class=SpellE>0001</span> 9FFF<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The user
DATA <span class=SpellE>segement</span> has 8 pages (64 <span class=SpellE>kByte</span>)
mapping virtual addresses from 0x2000 0000 <span class=SpellE>0000</span> <span
class=SpellE>0000</span> to 0x2000 0000 <span class=SpellE>0000</span> FFFF to physical
addresses from #0000 0001 <span class=SpellE>0001</span> a000 to #0000 0001 0002
9FFF.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The user
POOL <span class=SpellE>segement</span> has 2 pages (16 <span class=SpellE>kByte</span>)
mapping virtual addresses from 0x4000 0000 <span class=SpellE>0000</span> <span
class=SpellE>0000</span> to 0x4000 0000 <span class=SpellE>0000</span> 3FFF to
physical addresses from #0000 0001 0002 a000 to #0000 0001 0002 DFFF<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The user
STACK <span class=SpellE>segement</span> has 4 pages, two (16 <span
class=SpellE>kByte</span>) at the upper and two at the lower end. The lower end
mapping virtual addresses from 0x6000 0000 <span class=SpellE>0000</span> <span
class=SpellE>0000</span> to 0x6000 0000 <span class=SpellE>0000</span> 3FFF to
physical addresses from #0000 0001 0002 e000 to #0000 0001 0003 1FFF is used
for the MMIX register stack (growing upward). The upper end mapping virtual
addresses from 0x6000 0000 007F C000 to 0x6000 0000 007F FFFF to physical
addresses from #0000 0001 0003 2000 to #0000 0001 0003 5FFF is used by the GCC
compiler for its memory stack (growing downward).<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-GB style='mso-ansi-language:EN-GB'>Utility Functions<o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>There are
two utility functions: <span class=SpellE>KeyboardC</span> and <span
class=SpellE>ScreenC</span>.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>KeyboardC</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Reads one
character from the keyboard and returns the character. In case <span
class=GramE>of<span style='mso-spacerun:yes'>  </span>errors</span> (negative
status)<span style='mso-spacerun:yes'>  </span>or if no data is available (character
count is zero) it will power down the processor with a<span
style='mso-spacerun:yes'>  </span>SYNC 4 instruction, and waits until the
keyboard interrupt occurs.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>ScreenC</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The
procedure takes one parameter ($0) and stores it to the Screen using the GPU.
The GPU command to put a character on the <span class=GramE>screen,</span>
advances the current location automatically. All that is needed is adding a
0x01 in the high byte of a TETRA containing the character and store it to the
command TETRA of the GPU. In case the character was a carriage return (0x0D) a
following line feed character (0x0A) is added. This accounts for windows style
input, where typing the return<o:p></o:p></span></p>

<p class=MsoNormal><span class=GramE><span lang=EN-GB style='mso-ansi-language:
EN-GB'>Key,</span></span><span lang=EN-GB style='mso-ansi-language:EN-GB'> just
produces a carriage return character.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<h2><span lang=EN-GB style='mso-ansi-language:EN-GB'>Dynamic Traps<o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>During the
boot sequence the register <span class=SpellE>rTT</span> is set to the dynamic
trap handler <span class=SpellE>DTrap</span>. It saves all local registers
jumping to <span class=SpellE>DHandler</span>. After return from the <span
class=SpellE>DHandler</span>, it restores <span class=SpellE><span class=GramE>rJ</span></span>,
sets up $255 <span class=SpellE>fpr</span> <span class=SpellE>rK</span> and
returns to the user program.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The <span
class=SpellE>DHandler</span> inspects <span class=SpellE>rQ</span>, to find the
lowest bit set, resets it <span class=SpellE>ti</span> zero and jumps through a
<span class=SpellE>jumptable</span> to the specific tram handler. Most entries
in the jump table point to d default handler <span class=GramE>for<span
style='mso-spacerun:yes'>  </span>unhandled</span> traps. The specific trap <span
class=SpellE>handlers<span class=GramE>,must</span></span> not alter any global
registers. They can alter local registers and must return with a POP 0<span
class=GramE>,0</span> instruction.<o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Unhandled Traps<o:p></o:p></span></h3>

<p class=MsoNormal><span class=GramE><span lang=EN-GB style='mso-ansi-language:
EN-GB'>Informs the debugger with a SYMW 5 instruction and returns.</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Keyboard Interrupt 17<o:p></o:p></span></h3>

<p class=MsoNormal><span class=GramE><span lang=EN-GB style='mso-ansi-language:
EN-GB'>Reads the status and data OCTA from the keyboard.</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> In case <span class=GramE>of<span
style='mso-spacerun:yes'>  </span>errors</span> (negative status)<span
style='mso-spacerun:yes'>  </span>returns immediately. If no data available
(character count is zero) return immediately.<span style='mso-spacerun:yes'> 
</span>Otherwise, the available character is echoed to the screen. There is no
buffering for a subsequent read operation.<o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Mouse Interrupt 19<o:p></o:p></span></h3>

<p class=MsoNormal><span class=GramE><span lang=EN-GB style='mso-ansi-language:
EN-GB'>Informs the debugger with a SYMW 5 instruction and returns.</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<h2><span lang=EN-GB style='mso-ansi-language:EN-GB'>Forced Traps<o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Forced
traps are <span class=SpellE>maped</span> to the <span class=SpellE>FTrap</span>
routine using the <span class=SpellE><span class=GramE>rT</span></span>
register. The <span class=SpellE>FTrap</span> routine saves the local registers
<span class=SpellE>bycalling</span> the <span class=SpellE>FHandler</span> and
will <span class=SpellE>resore</span> <span class=SpellE><span class=GramE>rJ</span></span>
and <span class=SpellE>rK</span> (through $255) before resuming. .Forced traps
come in different flavours; the most common is caused by a TRAP instruction,
indicated by a negative ROP-Code and the instruction byte in <span
class=SpellE>rXX</span> being zero (TRAP equals zero). The others are either
ignored (Page Fault) or just don’t happen (Emulate Instruction, Page table
translation in software). For TRAP XYZ instructions, the Y byte contains the
function code. The handler extracts it and maps values from 0 to 0x1F to a jump
table. All other values are handled by the routine <span class=SpellE>TrapUnhandled</span>.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Individual
trap handlers can be inserted in the jump table. The trap handlers can inspect <span
class=SpellE>rXX</span>, for example to find out about the Z Byte, or the value
of <span class=SpellE>rBB</span>, which contains the value of $255 at the time
when the TRAP instructions was executed. It is the common <span class=SpellE>parametr</span>
register for TRAP instructions. Results should be stored back into <span
class=SpellE>rBB</span>, such that the final RESUME 1 instruction will place
them in $255 for the user program. The routines must end with a POP 0<span
class=GramE>,0</span> to get back to the <span class=SpellE>FTrap</span>
routine. The <span class=SpellE>MMIXWare</span> book has a sequence of
predefined TRAP instructions (Halt, <span class=SpellE>Fopen</span><span
class=GramE>, …,</span> <span class=SpellE>Fseek</span>, <span class=SpellE>Ftell</span>).
Not all of them are implemented in <span class=GramE>this</span> bios and the
remaining ones are only partly implemented, since there is no file I/O. There
are, however, some other TRAP routines available that allow access to the
connected hardware.<o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Halt (0x00)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The Halt
Trap informs the debugger, enables interrupts, and goes into an endless idle
loop. Executing a Trap 0<span class=GramE>,Halt,0</span> instruction will never
return to the user <span class=SpellE>programm</span>. The CPU will however
service dynamic interrupts. This can be appropriate, if there is no user <span
class=SpellE>programm</span> and the only purpose of the bios is to serve
interrupts.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fopen</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x01)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fclose</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x02)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fread</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x03)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fgets</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x04)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>See <span
class=SpellE>MMIXware</span>. The Trap is implemented only for <span
class=SpellE><span class=GramE>StdIn</span></span><span class=GramE>.,</span>
reading characters from the keyboard with echoing to the screen.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fgetws</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x05)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fwrite</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x06)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>See <span
class=SpellE>MMIXware</span>. The Trap is implemented only for <span
class=SpellE>StdOut</span> and <span class=SpellE>StdErr</span>, writing
characters to the screen.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fputs</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x07)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>See <span
class=SpellE>MMIXware</span>. The Trap is implemented only for <span
class=SpellE>StdOut</span> and <span class=SpellE>StdErr</span>, writing
characters to the screen. <o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fputws</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x08)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Fseek</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x09)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>Ftell</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x0a)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not
implemented. The debugger is informed on this before returning.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>TTimeOfDay</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x0F)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Returns in
$255 the number <span class=GramE>of<span style='mso-spacerun:yes'> 
</span>milliseconds</span> since </span><st1:time Minute="0" Hour="0"><span
 lang=EN-GB style='mso-ansi-language:EN-GB'>midnight</span></st1:time><span
lang=EN-GB style='mso-ansi-language:EN-GB'>.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GPutPixel</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x10)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Expects in
$255 the following data: 0xII 0xRR 0xGG 0xBB 0xXXXX 0xYYYY<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>(II byte
ignored, RR red <span class=SpellE>color</span> value byte, GG<span
style='mso-spacerun:yes'>  </span>green <span class=SpellE>color</span> value
byte, BB blue <span class=SpellE>color</span> value byte, XXXX x coordinate as
two byte value (range 0 to 639), YYYY y coordinate as two byte value (range 0
to 479)). Coordinates start in the top left corner with (0<span class=GramE>,0</span>)
and extend to bottom right.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The Pixel
with the given coordinates receives the given <span class=SpellE>color</span>. <o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>MWaitEvent</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x11)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The routine
waits until a mouse interrupt occurs. It then returns in $255 the following
four WYDE values: 0xBBBB 0xEEEE 0xXXXX 0xYYYY<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0xBBBB is
the Button status indicating which buttons were down when the interrupt was
triggered. It is a combination of these values:<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<div align=center>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-bottom:double windowtext 1.5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Name<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Value<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Remark<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:double windowtext 1.5pt;mso-border-alt:
  solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;padding:
  0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_LBUTTON<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:double windowtext 1.5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x01<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:double windowtext 1.5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;mso-border-top-alt:double windowtext 1.5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The left
  mouse button is down. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_MBUTTON<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x10<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The
  middle mouse button is down. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_RBUTTON<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x02<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The right
  mouse button is down. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_SHIFT<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x04<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The SHIFT
  key is down. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes'>
  <td width=139 valign=top style='width:104.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_CONTROL<o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x08<o:p></o:p></span></p>
  </td>
  <td width=252 valign=top style='width:189.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The CTRL
  key is down.<span style='mso-spacerun:yes'>   </span><o:p></o:p></span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0xEEEE is
the event status indicating what triggered the interrupt. It is one of the
following values:<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<div align=center>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0'>
  <td valign=top style='border:solid windowtext 1.0pt;border-bottom:double windowtext 1.5pt;
  mso-border-alt:solid windowtext .5pt;mso-border-bottom-alt:double windowtext 1.5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Name<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:solid windowtext 1.0pt;border-left:none;
  border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Value<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:solid windowtext 1.0pt;border-left:none;
  border-bottom:double windowtext 1.5pt;border-right:solid windowtext 1.0pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-bottom-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Remark<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:double windowtext 1.5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-top-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MOUSEMOVE<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:double windowtext 1.5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-top-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0x80<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:double windowtext 1.5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  mso-border-top-alt:double windowtext 1.5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>LBUTTONDOWN<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_LBUTTON
  | MK_SHIFT<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>LBUTTONUP<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_LBUTTON<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>LBUTTONDBLCLK<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_LBUTTON
  | MK_SHIFT | MK_CONTROL<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>RBUTTONDOWN<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_RBUTTON
  | MK_SHIFT<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>RBUTTONUP<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_RBUTTON<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>RBUTTONDBLCLK<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_RBUTTON
  | MK_SHIFT | MK_CONTROL<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MBUTTONDOWN<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_MBUTTON
  | MK_SHIFT<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MBUTTONUP<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_MBUTTON<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10;mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MBUTTONDBLCLK<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>MK_MBUTTON
  | MK_SHIFT | MK_CONTROL<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Mouse <span
class=GramE>movement <span style='mso-spacerun:yes'> </span>will</span> cause
interrupts only if enabled for the mouse device. For the three buttons, a down
event is typically first, followed by an up <span class=SpellE>enevnt</span>.
If the next down event comes fast enough, in addition to the bit <span
class=SpellE>incicating</span> the button and the shift-bit indicating the down
event also the control-bit is set to indicate a double click. <span
class=GramE>Application usually start</span> an action with the first down or
up event and modify the continuation when receiving the double click event.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>0xXXXX and
0xYYYY are two 16 bit values indicating the mouse coordinates where the event
happened.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GPutChar</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x12)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in $255 the following data: 0x000000 0xCC 0xXXXX 0xYYYY<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The high
TETRA contains the ASCII value of a character, padded to the left with three
zero byte. The low TETRA consists of two <span class=SpellE>WYDEs</span>, one
for the x and the other for the y coordinate. The given character is put at the
given position using the current text and text-background <span class=SpellE>colors</span>.
The current position is updated to the position exactly after the character
written.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GPutStr</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x13)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in $255 the address of a zero terminated string. It is written to the
screen starting at the current position using the current text and
text-background <span class=SpellE>colors</span>. The current position is
updated to the position exactly after the string.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GLine</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x14)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in the low TETRA of $255 two <span class=SpellE>WYDEs</span>, the x and
the y coordinate. A one pixel wide line is drawn from the current position to
the position given by x and y. The current position is then updated to the end
of the line, such that successive calls will produce joined lines.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GRectangle</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x15)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not yet
implemented.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GBitBlt</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x16)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not yet
implemented.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GSetPos</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x17)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in the low TETRA of $255 two <span class=SpellE>WYDEs</span>, the x and
the y coordinate. <span class=SpellE>Thes</span> values are the new current
position used for the next drawing operations.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GSetTextColor</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x18)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in the high TETRA of $255 the new text background <span class=SpellE>color</span>
and in the low TETRA of $255 the new text foreground <span class=SpellE>color</span>.
In each TETRA the highest byte is ignored and <span class=GramE>the three lower
order byte</span> contain the red green and blue value. The new <span
class=SpellE>colors</span> are used for all following text output operations
(including <span class=SpellE>Fputs</span>).<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GSetFillColor</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x19)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in the low TETRA of $255 the new fill <span class=SpellE>color</span>.
In the TETRA the highest byte is ignored and <span class=GramE>the three lower
order byte</span> contain the red green and blue value. The new <span
class=SpellE>color</span> is used for all following fill operations (e.g.
rectangles).<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GSetLineColor</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x1a)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The trap
expects in the low TETRA of $255 the new line <span class=SpellE>color</span>.
In the TETRA the highest byte is ignored and <span class=GramE>the three lower
order byte</span> contain the red green and blue value. The new <span
class=SpellE>color</span> is used for all following line drawing operations.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GBitBltIn</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x1b)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>This trap
facilitates a bit block transfer from memory into video ram. The trap expects
in $255 the address of two <span class=SpellE>OCTAs</span>. The first <span
class=SpellE>octa</span> (must be OCTA aligned) consists of four WYDE values:
0xWWWW 0xHHHH 0xXXXX 0xYYYY. These values indicate <span class=GramE>the with</span>
and height of the bitmap in main memory and the destination coordinates x and y
on the screen the upper left corner of the bitmap will appear at this position.
The current position will be changed to match this new position.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The second
OCTA (at address $255+8) contains the memory address of the bitmap data. It is
a sequence of width*height TETRAS, where each TETRA contains one <span
class=SpellE>color</span> value in the format 0x00RRGGBB. The whole bitmap is
displayed on the screen.<o:p></o:p></span></p>

<h3><span class=SpellE><span lang=EN-GB style='mso-ansi-language:EN-GB'>GBitBltOut</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> (0x1c)<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Not yet
implemented.<o:p></o:p></span></p>

</div>

</body>

</html>
